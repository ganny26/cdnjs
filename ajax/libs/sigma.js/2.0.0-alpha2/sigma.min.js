!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sigma=e():t.Sigma=e()}(this,function(){return function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=20)}([function(t,e){var a={};a.EPSILON=1e-6,a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,a.RANDOM=Math.random,a.ENABLE_SIMD=!1,a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this,a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE,a.setMatrixArrayType=function(t){a.ARRAY_TYPE=t};var n=Math.PI/180;a.toRadian=function(t){return t*n},a.equals=function(t,e){return Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=a},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),s=function(t){function e(){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),e}(i.EventEmitter);e.default=s},function(t,e,a){"use strict";function n(t){if(void 0!==s[t])return s[t];var e=0,a=0,n=0;if("#"===t[0])4===t.length?(e=parseInt(t.charAt(1)+t.charAt(1),16),a=parseInt(t.charAt(2)+t.charAt(2),16),n=parseInt(t.charAt(3)+t.charAt(3),16)):(e=parseInt(t.charAt(1)+t.charAt(2),16),a=parseInt(t.charAt(3)+t.charAt(4),16),n=parseInt(t.charAt(5)+t.charAt(6),16));else if(u.test(t)){var r=t.match(l);e=+r[1],a=+r[2],n=+r[3]}var o=256*e*256+256*a+n;return s[t]=o,o}function r(t){var e=t.angle,a=t.ratio,n=t.x,r=t.y,o=i.mat3.create(),s=i.mat3.fromScaling(i.mat3.create(),[1/a,1/a]),u=i.mat3.fromRotation(i.mat3.create(),-e),l=i.mat3.fromTranslation(i.mat3.create(),[-n,-r]);return i.mat3.multiply(o,s,u),i.mat3.multiply(o,o,l),o}function o(t,e,a,n){var r=n||new Uint8Array(4);return t.readPixels(e,a,1,1,t.RGBA,t.UNSIGNED_BYTE,r),r}Object.defineProperty(e,"__esModule",{value:!0}),e.floatColor=n,e.matrixFromCamera=r,e.extractPixel=o;var i=a(11),s={},u=/^\s*rgba?\s*\(/,l=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)\s*(,.*)?\)\s*$/},function(t,e){function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},a.prototype.emit=function(t){var e,a,r,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(a=this._events[t],i(a))return!1;if(n(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),a.apply(this,s)}else if(o(a))for(s=Array.prototype.slice.call(arguments,1),l=a.slice(),r=l.length,u=0;u<r;u++)l[u].apply(this,s);return!0},a.prototype.addListener=function(t,e){var r;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=i(this._maxListeners)?a.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(t,e){function a(){this.removeListener(t,a),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return a.listener=e,this.on(t,a),this},a.prototype.removeListener=function(t,e){var a,r,i,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=this._events[t],i=a.length,r=-1,a===e||n(a.listener)&&a.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(a)){for(s=i;s-- >0;)if(a[s]===e||a[s].listener&&a[s].listener===e){r=s;break}if(r<0)return this;1===a.length?(a.length=0,delete this._events[t]):a.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},a.prototype.removeAllListeners=function(t){var e,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[t],n(a))this.removeListener(t,a);else if(a)for(;a.length;)this.removeListener(t,a[a.length-1]);return delete this._events[t],this},a.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},a.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},a.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=a(3),u=a(19),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(u),c=a(10),h={easing:"quadraticInOut",duration:150},f=function(t){function e(t){n(this,e),t=t||{};var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.x=0,a.y=0,a.angle=0,a.ratio=1,a.width=t.width||0,a.height=t.height||0,a.nextFrame=null,a.enabled=!0,a}return o(e,t),i(e,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"abstractDisplayToGraph",value:function(t,e){var a=Math.cos(this.angle),n=Math.sin(this.angle);return{x:(t*a-e*n)*this.ratio,y:(e*a+t*n)*this.ratio}}},{key:"displayToGraph",value:function(t,e){var a=Math.cos(this.angle),n=Math.sin(this.angle),r=this.width/2-(this.x*a+this.y*n)/this.ratio,o=this.height/2-(this.y*a-this.x*n)/this.ratio,i=t-r,s=e-o;return{x:(i*a-s*n)*this.ratio,y:(s*a+i*n)*this.ratio}}},{key:"graphToDisplay",value:function(t,e){var a=Math.cos(this.angle)/this.ratio,n=Math.sin(this.angle)/this.ratio;return{x:t*a+e*n+(this.width/2-this.x*a-this.y*n),y:e*a-t*n+(this.height/2-this.y*a+this.x*n)}}},{key:"setState",value:function(t){return this.enabled?("x"in t&&(this.x=t.x),"y"in t&&(this.y=t.y),"angle"in t&&(this.angle=t.angle),"ratio"in t&&(this.ratio=t.ratio),this.emit("updated",this.getState()),this):this}},{key:"resize",value:function(t){return this.enabled?("width"in t&&(this.width=t.width),"height"in t&&(this.height=t.height),this.emit("resized",this.getDimensions()),this):this}},{key:"animate",value:function(t,e){var a=this;if(!this.enabled)return this;e=(0,c.assign)({},h,e);var n="function"==typeof e.easing?e.easing:l[e.easing],r=Date.now(),o=this.getState(),i=function i(){var s=(Date.now()-r)/e.duration;if(s>=1)return a.nextFrame=null,void a.setState(t);var u=n(s),l={};"x"in t&&(l.x=o.x+(t.x-o.x)*u),"y"in t&&(l.y=o.y+(t.y-o.y)*u),"angle"in t&&(l.angle=o.angle+(t.angle-o.angle)*u),"ratio"in t&&(l.ratio=o.ratio+(t.ratio-o.ratio)*u),a.setState(l),a.nextFrame=requestAnimationFrame(i)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.nextFrame=requestAnimationFrame(i)):i()}}]),e}(s.EventEmitter);e.default=f},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),s=a(17),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=a(18),c=function(t){function e(t,a){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return o.container=t,o.camera=a,o.enabled=!0,o.hasDragged=!1,o.downStartTime=null,o.startMouseX=null,o.startMouseY=null,o.isMouseDown=!1,o.isMoving=!0,o.movingTimeout=null,o.startCameraState=null,o.lastCameraState=null,o.clicks=0,o.doubleClickTimeout=null,o.handleClick=o.handleClick.bind(o),o.handleDown=o.handleDown.bind(o),o.handleUp=o.handleUp.bind(o),o.handleMove=o.handleMove.bind(o),o.handleWheel=o.handleWheel.bind(o),o.handleOut=o.handleOut.bind(o),t.addEventListener("click",o.handleClick,!1),t.addEventListener("mousedown",o.handleDown,!1),t.addEventListener("mousemove",o.handleMove,!1),t.addEventListener("DOMMouseScroll",o.handleWheel,!1),t.addEventListener("mousewheel",o.handleWheel,!1),t.addEventListener("mouseout",o.handleOut,!1),document.addEventListener("mouseup",o.handleUp,!1),o}return o(e,t),i(e,[{key:"handleClick",value:function(t){var e=this;if(this.enabled){if(2===++this.clicks)return this.clicks=0,clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null,this.handleDoubleClick(t);setTimeout(function(){e.clicks=0,e.doubleClickTimeout=null},300),this.emit("click",(0,l.getMouseCoords)(t))}}},{key:"handleDoubleClick",value:function(t){if(this.enabled){var e=(0,l.getCenter)(t),a=this.camera.getState(),n=this.camera.abstractDisplayToGraph((0,l.getX)(t)-e.x,(0,l.getY)(t)-e.y);return this.camera.animate({x:n.x*(1-1/2.2)+a.x,y:n.y*(1-1/2.2)+a.y,ratio:1/2.2*a.ratio},{easing:"quadraticInOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}},{key:"handleDown",value:function(t){this.enabled&&(this.startCameraState=this.camera.getState(),this.lastCameraState=this.startCameraState,this.startMouseX=(0,l.getX)(t),this.startMouseY=(0,l.getY)(t),this.hasDragged=!1,this.downStartTime=Date.now(),t.which,this.isMouseDown=!0,this.emit("mousedown",(0,l.getMouseCoords)(t)))}},{key:"handleUp",value:function(t){if(this.enabled&&this.isMouseDown){this.isMouseDown=!1,this.movingTimeout&&(this.movingTimeout=null,clearTimeout(this.movingTimeout));var e=(0,l.getX)(t),a=(0,l.getY)(t),n=this.camera.getState();this.isMoving?this.camera.animate({x:n.x+3*(n.x-this.lastCameraState.x),y:n.y+3*(n.y-this.lastCameraState.y)},{duration:200,easing:"quadraticOut"}):this.startMouseX===e&&this.startMouseY===a||this.camera.setState({x:n.x,y:n.y}),this.emit("mouseup",(0,l.getMouseCoords)(t)),this.isMoving=!1}}},{key:"handleMove",value:function(t){var e=this;if(this.enabled){if(this.emit("mousemove",(0,l.getMouseCoords)(t)),this.isMouseDown){this.isMoving=!0,this.hasDragged=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=setTimeout(function(){e.movingTimeout=null,e.isMoving=!1},200);var a=this.camera.abstractDisplayToGraph((0,l.getX)(t)-this.startMouseX,(0,l.getY)(t)-this.startMouseY),n=this.startCameraState.x-a.x,r=this.startCameraState.y-a.y,o=this.camera.getState();o.x===n&&o.y===r||(this.lastCameraState=o,this.camera.setState({x:n,y:r}))}return t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}},{key:"handleWheel",value:function(t){if(this.enabled){var e=(0,l.getWheelDelta)(t);if(e){var a=e>0?1/1.7:1.7,n=(0,l.getCenter)(t),r=this.camera.getState(),o=this.camera.abstractDisplayToGraph((0,l.getX)(t)-n.x,(0,l.getY)(t)-n.y);return this.camera.animate({x:o.x*(1-a)+r.x,y:o.y*(1-a)+r.y,ratio:a*r.ratio},{easing:"quadraticOut",duration:200}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}}}},{key:"handleOut",value:function(){}}]),e}(u.default);e.default=c},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,a,n,r,o,i){return t<n+o&&t+a>n&&e<r+i&&e+a>r}function o(t,e,a,n,r,o){var i=a+r/2,s=n+o/2,u=e<s,l=t<i;return u?l?m:v:l?x:p}function i(t,e){for(var a=[0,0];a.length;){var n=a.pop(),r=a.pop(),o=4*r+l,i=4*r+2*l,s=4*r+3*l,u=4*r+4*l,c=e[r+h],m=e[r+f],v=e[r+d],x=e[r+M],p=v/2,S=x/2;e[o+h]=c,e[o+f]=m,e[o+d]=p,e[o+M]=S,e[i+h]=c+p,e[i+f]=m,e[i+d]=p,e[i+M]=S,e[s+h]=c,e[s+f]=m+S,e[s+d]=p,e[s+M]=S,e[u+h]=c+p,e[u+f]=m+S,e[u+d]=p,e[u+M]=S,n<t-1&&(a.push(u,n+1),a.push(s,n+1),a.push(i,n+1),a.push(o,n+1))}}function s(t,e,a,n,o,i,s){for(var u=o-s,c=i-s,m=2*s,v=[0,0];v.length;){var x=v.pop(),p=v.pop();if(x>=t)return a[p]=a[p]||[],void a[p].push(n);var S=4*p+l,g=4*p+2*l,b=4*p+3*l,I=4*p+4*l,y=r(u,c,m,e[S+h],e[S+f],e[S+d],e[S+M]),D=r(u,c,m,e[g+h],e[g+f],e[g+d],e[g+M]),F=r(u,c,m,e[b+h],e[b+f],e[b+d],e[b+M]),w=r(u,c,m,e[I+h],e[I+f],e[I+d],e[I+M]),_=y+D+F+w;if(0===_)throw new Error("sigma/quadtree.insertNode: no collision (level: "+x+", key: "+n+", x: "+o+", y: "+i+", size: "+s+").");if(3===_)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: "+x+", key: "+n+", x: "+o+", y: "+i+", size: "+s+").");if(_>1)return a[p]=a[p]||[],void a[p].push(n);x++,y&&v.push(S,x),D&&v.push(g,x),F&&v.push(b,x),w&&v.push(I,x)}}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),l=4,c=5,h=0,f=1,d=2,M=3,m=1,v=2,x=3,p=4,S=function(){function t(e){n(this,t);var a=Math.pow(4,c);this.data=new Float32Array(l*((4*a-1)/3)),this.containers={},e&&this.resize(e)}return u(t,[{key:"add",value:function(t,e,a,n){return s(c,this.data,this.containers,t,e,a,n),this}},{key:"resize",value:function(t){this.clear(),this.data[h]=t.x,this.data[f]=t.y,this.data[d]=t.width,this.data[M]=t.height,i(c,this.data)}},{key:"clear",value:function(){return this.containers={},this}},{key:"point",value:function(t,e){var a=[],n=0,r=0;do{this.containers[n]&&a.push.apply(a,this.containers[n]);n=4*n+o(t,e,this.data[n+h],this.data[n+f],this.data[n+d],this.data[n+M])*l,r++}while(r<=c);return a}}]),t}();e.default=S},function(t,e,a){"use strict";function n(t,e){t.fillStyle="#000",t.font="14px arial",t.fillText(e.label,e.x+e.size+3,e.y+14/3)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,a){"use strict";function n(t,e){var a=document.createElement(t);if(!e)return a;for(var n in e)if("style"===n)for(var r in e[n])a.style[r]=e[n][r];else a.setAttribute(n,e[n]);return a}function r(){var t=window.screen;return void 0!==t.deviceXDPI&&void 0!==t.logicalXDPI&&t.deviceXDPI>t.logicalXDPI?t.systemXDPI/t.logicalXDPI:void 0!==window.devicePixelRatio?window.devicePixelRatio:1}function o(t,e){t=t||{};var a=t.mode||i.mode,n=t.height||1,r=t.width||1,o=e.maxX,s=e.maxY,u=e.minX,l=e.minY,c=(o+u)/2,h=(s+l)/2,f="outside"===a?Math.max(r/Math.max(o-u,1),n/Math.max(s-l,1)):Math.min(r/Math.max(o-u,1),n/Math.max(s-l,1)),d=function(t){return{x:(t.x-c)*f,y:(t.y-h)*f}};return d.inverse=function(t){return{x:t.x/f+c,y:t.y/f+h}},d}Object.defineProperty(e,"__esModule",{value:!0}),e.createElement=n,e.getPixelRatio=r,e.createNodeRescalingFunction=o;var i={mode:"inside",margin:0,minSize:1,maxSize:8}},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),o=a(25),i=function(){function t(e,a,r){n(this,t),this.vertexShaderSource=a,this.fragmentShaderSource=r,this.load(e)}return r(t,[{key:"load",value:function(t){return this.vertexShader=(0,o.loadVertexShader)(t,this.vertexShaderSource),this.fragmentShader=(0,o.loadFragmentShader)(t,this.fragmentShaderSource),this.program=(0,o.loadProgram)(t,[this.vertexShader,this.fragmentShader]),this.program}}]),t}();e.default=i},function(t,e,a){"use strict";function n(t){t=t||{};for(var e=arguments.length,a=Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];for(var r=0,o=a.length;r<o;r++)if(a[r])for(var i in a[r])t[i]=a[r][i];return t}Object.defineProperty(e,"__esModule",{value:!0}),e.assign=n},function(t,e,a){e.glMatrix=a(0),e.mat2=a(26),e.mat2d=a(27),e.mat3=a(12),e.mat4=a(28),e.quat=a(29),e.vec2=a(30),e.vec3=a(13),e.vec4=a(14)},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},r.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromValues=function(t,e,a,r,o,i,s,u,l){var c=new n.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=a,c[3]=r,c[4]=o,c[5]=i,c[6]=s,c[7]=u,c[8]=l,c},r.set=function(t,e,a,n,r,o,i,s,u,l){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=o,t[5]=i,t[6]=s,t[7]=u,t[8]=l,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,e){if(t===e){var a=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=a,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},r.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*i-s*l,f=-c*o+s*u,d=l*o-i*u,M=a*h+n*f+r*d;return M?(M=1/M,t[0]=h*M,t[1]=(-c*n+r*l)*M,t[2]=(s*n-r*i)*M,t[3]=f*M,t[4]=(c*a-r*u)*M,t[5]=(-s*a+r*o)*M,t[6]=d*M,t[7]=(-l*a+n*u)*M,t[8]=(i*a-n*o)*M,t):null},r.adjoint=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=i*c-s*l,t[1]=r*l-n*c,t[2]=n*s-r*i,t[3]=s*u-o*c,t[4]=a*c-r*u,t[5]=r*o-a*s,t[6]=o*l-i*u,t[7]=n*u-a*l,t[8]=a*i-n*o,t},r.determinant=function(t){var e=t[0],a=t[1],n=t[2],r=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8];return e*(l*o-i*u)+a*(-l*r+i*s)+n*(u*r-o*s)},r.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=a[0],d=a[1],M=a[2],m=a[3],v=a[4],x=a[5],p=a[6],S=a[7],g=a[8];return t[0]=f*n+d*i+M*l,t[1]=f*r+d*s+M*c,t[2]=f*o+d*u+M*h,t[3]=m*n+v*i+x*l,t[4]=m*r+v*s+x*c,t[5]=m*o+v*u+x*h,t[6]=p*n+S*i+g*l,t[7]=p*r+S*s+g*c,t[8]=p*o+S*u+g*h,t},r.mul=r.multiply,r.translate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=a[0],d=a[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=i,t[4]=s,t[5]=u,t[6]=f*n+d*i+l,t[7]=f*r+d*s+c,t[8]=f*o+d*u+h,t},r.rotate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(a),d=Math.cos(a);return t[0]=d*n+f*i,t[1]=d*r+f*s,t[2]=d*o+f*u,t[3]=d*i-f*n,t[4]=d*s-f*r,t[5]=d*u-f*o,t[6]=l,t[7]=c,t[8]=h,t},r.scale=function(t,e,a){var n=a[0],r=a[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},r.fromRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},r.fromQuat=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a+a,s=n+n,u=r+r,l=a*i,c=n*i,h=n*s,f=r*i,d=r*s,M=r*u,m=o*i,v=o*s,x=o*u;return t[0]=1-h-M,t[3]=c-x,t[6]=f+v,t[1]=c+x,t[4]=1-l-M,t[7]=d-m,t[2]=f-v,t[5]=d+m,t[8]=1-l-h,t},r.normalFromMat4=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],M=e[12],m=e[13],v=e[14],x=e[15],p=a*s-n*i,S=a*u-r*i,g=a*l-o*i,b=n*u-r*s,I=n*l-o*s,y=r*l-o*u,D=c*m-h*M,F=c*v-f*M,w=c*x-d*M,_=h*v-f*m,E=h*x-d*m,A=f*x-d*v,P=p*A-S*E+g*_+b*w-I*F+y*D;return P?(P=1/P,t[0]=(s*A-u*E+l*_)*P,t[1]=(u*w-i*A-l*F)*P,t[2]=(i*E-s*w+l*D)*P,t[3]=(r*E-n*A-o*_)*P,t[4]=(a*A-r*w+o*F)*P,t[5]=(n*w-a*E-o*D)*P,t[6]=(m*y-v*I+x*b)*P,t[7]=(v*g-M*y-x*S)*P,t[8]=(M*I-m*g+x*p)*P,t):null},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=e[0],d=e[1],M=e[2],m=e[3],v=e[4],x=e[5],p=t[6],S=e[7],g=e[8];return Math.abs(a-f)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(r-d)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-M)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-m)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-v)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-x)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(l-p)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(c-S)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-g)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))},t.exports=r},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},r.fromValues=function(t,e,a){var r=new n.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=a,r},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},r.set=function(t,e,a,n){return t[0]=e,t[1]=a,t[2]=n,t},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t},r.sub=r.subtract,r.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t},r.mul=r.multiply,r.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},r.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t[2]=Math.min(e[2],a[2]),t},r.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t[2]=Math.max(e[2],a[2]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},r.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t},r.scaleAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t},r.distance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(a*a+n*n+r*r)},r.dist=r.distance,r.squaredDistance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return a*a+n*n+r*r},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],a=t[1],n=t[2];return Math.sqrt(e*e+a*a+n*n)},r.len=r.length,r.squaredLength=function(t){var e=t[0],a=t[1],n=t[2];return e*e+a*a+n*n},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},r.normalize=function(t,e){var a=e[0],n=e[1],r=e[2],o=a*a+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},r.cross=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[0],s=a[1],u=a[2];return t[0]=r*u-o*s,t[1]=o*i-n*u,t[2]=n*s-r*i,t},r.lerp=function(t,e,a,n){var r=e[0],o=e[1],i=e[2];return t[0]=r+n*(a[0]-r),t[1]=o+n*(a[1]-o),t[2]=i+n*(a[2]-i),t},r.hermite=function(t,e,a,n,r,o){var i=o*o,s=i*(2*o-3)+1,u=i*(o-2)+o,l=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*s+a[0]*u+n[0]*l+r[0]*c,t[1]=e[1]*s+a[1]*u+n[1]*l+r[1]*c,t[2]=e[2]*s+a[2]*u+n[2]*l+r[2]*c,t},r.bezier=function(t,e,a,n,r,o){var i=1-o,s=i*i,u=o*o,l=s*i,c=3*o*s,h=3*u*i,f=u*o;return t[0]=e[0]*l+a[0]*c+n[0]*h+r[0]*f,t[1]=e[1]*l+a[1]*c+n[1]*h+r[1]*f,t[2]=e[2]*l+a[2]*c+n[2]*h+r[2]*f,t},r.random=function(t,e){e=e||1;var a=2*n.RANDOM()*Math.PI,r=2*n.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(a)*o,t[1]=Math.sin(a)*o,t[2]=r*e,t},r.transformMat4=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[3]*n+a[7]*r+a[11]*o+a[15];return i=i||1,t[0]=(a[0]*n+a[4]*r+a[8]*o+a[12])/i,t[1]=(a[1]*n+a[5]*r+a[9]*o+a[13])/i,t[2]=(a[2]*n+a[6]*r+a[10]*o+a[14])/i,t},r.transformMat3=function(t,e,a){var n=e[0],r=e[1],o=e[2];return t[0]=n*a[0]+r*a[3]+o*a[6],t[1]=n*a[1]+r*a[4]+o*a[7],t[2]=n*a[2]+r*a[5]+o*a[8],t},r.transformQuat=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[0],s=a[1],u=a[2],l=a[3],c=l*n+s*o-u*r,h=l*r+u*n-i*o,f=l*o+i*r-s*n,d=-i*n-s*r-u*o;return t[0]=c*l+d*-i+h*-u-f*-s,t[1]=h*l+d*-s+f*-i-c*-u,t[2]=f*l+d*-u+c*-s-h*-i,t},r.rotateX=function(t,e,a,n){var r=[],o=[];return r[0]=e[0]-a[0],r[1]=e[1]-a[1],r[2]=e[2]-a[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},r.rotateY=function(t,e,a,n){var r=[],o=[];return r[0]=e[0]-a[0],r[1]=e[1]-a[1],r[2]=e[2]-a[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},r.rotateZ=function(t,e,a,n){var r=[],o=[];return r[0]=e[0]-a[0],r[1]=e[1]-a[1],r[2]=e[2]-a[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+a[0],t[1]=o[1]+a[1],t[2]=o[2]+a[2],t},r.forEach=function(){var t=r.create();return function(e,a,n,r,o,i){var s,u;for(a||(a=3),n||(n=0),u=r?Math.min(r*a+n,e.length):e.length,s=n;s<u;s+=a)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),r.angle=function(t,e){var a=r.fromValues(t[0],t[1],t[2]),n=r.fromValues(e[0],e[1],e[2]);r.normalize(a,a),r.normalize(n,n);var o=r.dot(a,n);return o>1?0:Math.acos(o)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=e[0],s=e[1],u=e[2];return Math.abs(a-i)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(r-s)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=r},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.fromValues=function(t,e,a,r){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=a,o[3]=r,o},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.set=function(t,e,a,n,r){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t},r.sub=r.subtract,r.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t[2]=e[2]*a[2],t[3]=e[3]*a[3],t},r.mul=r.multiply,r.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t[3]=e[3]/a[3],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},r.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t[2]=Math.min(e[2],a[2]),t[3]=Math.min(e[3],a[3]),t},r.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t[2]=Math.max(e[2],a[2]),t[3]=Math.max(e[3],a[3]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},r.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t},r.scaleAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t},r.distance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(a*a+n*n+r*r+o*o)},r.dist=r.distance,r.squaredDistance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return a*a+n*n+r*r+o*o},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],a=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+a*a+n*n+r*r)},r.len=r.length,r.squaredLength=function(t){var e=t[0],a=t[1],n=t[2],r=t[3];return e*e+a*a+n*n+r*r},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},r.normalize=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a*a+n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=a*i,t[1]=n*i,t[2]=r*i,t[3]=o*i),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},r.lerp=function(t,e,a,n){var r=e[0],o=e[1],i=e[2],s=e[3];return t[0]=r+n*(a[0]-r),t[1]=o+n*(a[1]-o),t[2]=i+n*(a[2]-i),t[3]=s+n*(a[3]-s),t},r.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),r.normalize(t,t),r.scale(t,t,e),t},r.transformMat4=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3];return t[0]=a[0]*n+a[4]*r+a[8]*o+a[12]*i,t[1]=a[1]*n+a[5]*r+a[9]*o+a[13]*i,t[2]=a[2]*n+a[6]*r+a[10]*o+a[14]*i,t[3]=a[3]*n+a[7]*r+a[11]*o+a[15]*i,t},r.transformQuat=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=a[0],s=a[1],u=a[2],l=a[3],c=l*n+s*o-u*r,h=l*r+u*n-i*o,f=l*o+i*r-s*n,d=-i*n-s*r-u*o;return t[0]=c*l+d*-i+h*-u-f*-s,t[1]=h*l+d*-s+f*-i-c*-u,t[2]=f*l+d*-u+c*-s-h*-i,t[3]=e[3],t},r.forEach=function(){var t=r.create();return function(e,a,n,r,o,i){var s,u;for(a||(a=4),n||(n=0),u=r?Math.min(r*a+n,e.length):e.length,s=n;s<u;s+=a)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=r},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),u=a(11),l=a(1),c=n(l),h=a(4),f=n(h),d=a(5),M=n(d),m=a(6),v=n(m),x=a(24),p=n(x),S=a(23),g=n(S),b=a(7),I=n(b),y=a(21),D=n(y),F=a(10),w=a(8),_=a(2),E=(0,w.getPixelRatio)(),A=(0,w.getPixelRatio)(),P=function(t){function e(t){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(!(t instanceof HTMLElement))throw new Error("sigma/renderers/webgl: container should be an html element.");a.sigma=null,a.captors={},a.container=t,a.elements={},a.contexts={},a.listeners={},a.quadtree=new v.default,a.nodeArray=null,a.nodeIndicesArray=null,a.nodeOrder={},a.nodeDataCache={},a.edgeArray=null,a.edgeIndicesArray=null,a.edgeOrder={},a.nodeRescalingFunction=null,a.width=0,a.height=0,a.highlightedNodes=new Set,a.hoveredNode=null,a.wasRenderedInThisFrame=!1,a.renderFrame=null,a.renderHighlightedNodesFrame=null,a.needToProcess=!1,a.needToSoftProcess=!1,a.pixel=new Uint8Array(4),a.createContext("edges"),a.createContext("nodes"),a.createContext("labels",!1),a.createContext("hovers",!1),a.createContext("mouse",!1);var n=a.contexts.nodes;return n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),n=a.contexts.edges,n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),a.nodePrograms={def:new p.default(a.contexts.nodes)},a.edgePrograms={def:new g.default(a.contexts.edges)},a.resize(),a.camera=new f.default({width:a.width,height:a.height}),a.bindCameraHandlers(),a.captors={mouse:new M.default(a.elements.mouse,a.camera)},a.bindEventHandlers(),a}return i(e,t),s(e,[{key:"testPixel",value:function(t,e,a){return(0,_.extractPixel)(t,e*A,(this.height-a)*A,this.pixel),0!==this.pixel[3]}},{key:"createContext",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(0,w.createElement)("canvas",{class:"sigma-"+t,style:{position:"absolute"}});this.elements[t]=a,this.container.appendChild(a);var n={preserveDrawingBuffer:!0,antialias:!1},r=a.getContext(e?"webgl":"2d",n);return this.contexts[t]=r,this}},{key:"bindCameraHandlers",value:function(){var t=this;return this.listeners.camera=function(){t.scheduleRender()},this.camera.on("updated",this.listeners.camera),this}},{key:"bindEventHandlers",value:function(){var t=this,e=function(t,e,a,n,r){return t>a-r&&t<a+r&&e>n-r&&e<n+r&&Math.sqrt(Math.pow(t-a,2)+Math.pow(e-n,2))<r},a=function(e,a){var n=t.camera.displayToGraph(e,a);return t.quadtree.point(n.x,n.y)};return this.listeners.handleMove=function(n){for(var r=Math.pow(t.camera.getState().ratio,.5),o=a(n.clientX,n.clientY),i=0,s=o.length;i<s;i++){var u=o[i],l=t.nodeDataCache[u],c=t.camera.graphToDisplay(l.x,l.y),h=l.size/r;if(e(n.clientX,n.clientY,c.x,c.y,h))return t.hoveredNode=u,t.emit("overNode",{node:u}),t.scheduleHighlightedNodesRender()}if(t.hoveredNode){var f=t.nodeDataCache[t.hoveredNode],d=t.camera.graphToDisplay(f.x,f.y),M=f.size/r;if(!e(n.clientX,n.clientY,d.x,d.y,M))return t.hoveredNode=null,t.emit("outNode",{node:t.hoveredNode}),t.scheduleHighlightedNodesRender()}},this.listeners.handleDown=function(n){for(var r=Math.pow(t.camera.getState().ratio,.5),o=a(n.clientX,n.clientY),i=0,s=o.length;i<s;i++){var u=o[i],l=t.nodeDataCache[u],c=t.camera.graphToDisplay(l.x,l.y),h=l.size/r;if(e(n.clientX,n.clientY,c.x,c.y,h))return t.emit("downNode",{node:u})}},this.listeners.handleClick=function(n){for(var r=Math.pow(t.camera.getState().ratio,.5),o=a(n.clientX,n.clientY),i=0,s=o.length;i<s;i++){var u=o[i],l=t.nodeDataCache[u],c=t.camera.graphToDisplay(l.x,l.y),h=l.size/r;if(e(n.clientX,n.clientY,c.x,c.y,h))return t.emit("clickNode",{node:u})}return t.emit("clickStage")},this.captors.mouse.on("mousemove",this.listeners.handleMove),this.captors.mouse.on("mousedown",this.listeners.handleDown),this.captors.mouse.on("click",this.listeners.handleClick),this}},{key:"bindGraphHandlers",value:function(){var t=this,e=this.sigma.getGraph();return this.listeners.graphUpdate=function(){t.needToProcess=!0,t.scheduleRender()},this.listeners.softGraphUpdate=function(){t.needToSoftProcess=!0,t.scheduleRender()},e.on("nodeAdded",this.listeners.graphUpdate),e.on("nodeDropped",this.listeners.graphUpdate),e.on("nodeAttributesUpdated",this.listeners.softGraphUpdate),e.on("edgeAdded",this.listeners.graphUpdate),e.on("nodeDropped",this.listeners.graphUpdate),e.on("edgeAttributesUpdated",this.listeners.softGraphUpdate),e.on("cleared",this.listeners.graphUpdate),this}},{key:"process",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.sigma.getGraph(),a=this.sigma.getGraphExtent();this.nodeRescalingFunction=(0,w.createNodeRescalingFunction)({width:this.width,height:this.height},a);var n=this.nodeRescalingFunction({x:a.minX,y:a.minY}),r=this.nodeRescalingFunction({x:a.maxX,y:a.maxY});this.quadtree.resize({x:n.x,y:n.y,width:r.x-n.x,height:r.y-n.y}),this.nodeRescaleCache={};var o=this.nodePrograms.def;t||(this.nodeArray=new Float32Array(p.default.POINTS*p.default.ATTRIBUTES*e.order),this.nodeOrder={});for(var i=e.nodes(),s=0,u=i.length;s<u;s++){var l=i[s];this.nodeOrder[l]=s;var c=this.sigma.getNodeData(l),h=this.nodeRescalingFunction(c),f=(0,F.assign)({},c,h);this.quadtree.add(l,f.x,f.y,f.size),this.nodeDataCache[l]=f,o.process(this.nodeArray,f,s*p.default.POINTS*p.default.ATTRIBUTES)}var d=this.edgePrograms.def;t||(this.edgeArray=new Float32Array(g.default.POINTS*g.default.ATTRIBUTES*e.size),this.edgeOrder={});for(var M=e.edges(),m=0,v=M.length;m<v;m++){var x=M[m];this.edgeOrder[x]=m;var S=this.sigma.getEdgeData(x),b=e.extremities(x),I=this.nodeDataCache[b[0]],y=this.nodeDataCache[b[1]];d.process(this.edgeArray,I,y,S,m*g.default.POINTS*g.default.ATTRIBUTES)}return t||"function"!=typeof d.computeIndices||(this.edgeIndicesArray=d.computeIndices(this.edgeArray)),this}},{key:"processNode",value:function(t){var e=this.nodePrograms.def,a=this.sigma.getNodeData(t);return e.process(this.nodeArray,a,this.nodeOrder[t]*p.default.POINTS*p.default.ATTRIBUTES),this}},{key:"processEdge",value:function(t){var e=this.sigma.getGraph(),a=this.edgePrograms.def,n=this.sigma.getEdgeData(t),r=e.extremities(t),o=this.sigma.getNodeData(r[0]),i=this.sigma.getNodeData(r[1]);return a.process(this.edgeArray,o,i,n,this.edgeOrder[t]*g.default.POINTS*g.default.ATTRIBUTES),this}},{key:"bind",value:function(t){return this.sigma=t,this.bindGraphHandlers(),this.process(),this}},{key:"getCamera",value:function(){return this.camera}},{key:"getMouseCaptor",value:function(){return this.captors.mouse}},{key:"resize",value:function(t,e){var a=this.width,n=this.height;if(arguments.length>1?(this.width=t,this.height=e):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight),a===this.width&&n===this.height)return this;for(var r in this.elements){var o=this.elements[r];o.style.width=this.width+"px",o.style.height=this.height+"px"}for(var i in this.contexts){var s=this.contexts[i];s.scale?(this.elements[i].setAttribute("width",this.width*E+"px"),this.elements[i].setAttribute("height",this.height*E+"px"),1!==E&&s.scale(E,E)):(this.elements[i].setAttribute("width",this.width*A+"px"),this.elements[i].setAttribute("height",this.height*A+"px")),s.viewport&&s.viewport(0,0,this.width*A,this.height*A)}return this}},{key:"clear",value:function(){var t=this.contexts.nodes;return t.clear(t.COLOR_BUFFER_BIT),t=this.contexts.edges,t.clear(t.COLOR_BUFFER_BIT),t=this.contexts.labels,t.clearRect(0,0,this.width,this.height),t=this.contexts.hovers,t.clearRect(0,0,this.width,this.height),this}},{key:"render",value:function(){this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear();var t=this.camera.getState(),e=(0,_.matrixFromCamera)(t),a=u.mat3.fromTranslation(u.mat3.create(),[this.width/2,this.height/2]);u.mat3.multiply(e,a,e);var n=void 0,r=void 0;r=this.contexts.nodes,n=this.nodePrograms.def,n.render(r,this.nodeArray,{matrix:e,width:this.width,height:this.height,ratio:t.ratio,nodesPowRatio:.5,scalingRatio:A}),r=this.contexts.edges,n=this.edgePrograms.def,n.render(r,this.edgeArray,{matrix:e,width:this.width,height:this.height,ratio:t.ratio,edgesPowRatio:.5,scalingRatio:A,indices:this.edgeIndicesArray});for(var o=this.sigma.getGraph().nodes(),i=this.contexts.labels,s=Math.pow(t.ratio,.5),l=0,c=o.length;l<c;l++){var h=this.nodeDataCache[o[l]],f=this.camera.graphToDisplay(h.x,h.y),d=f.x,M=f.y,m=h.size/s;m<8||(0,I.default)(i,{label:h.label,size:m,x:d,y:M})}return this.renderHighlightedNodes(),this}},{key:"renderHighlightedNodes",value:function(){var t=this,e=this.camera,a=Math.pow(e.getState().ratio,.5),n=this.contexts.hovers;n.clearRect(0,0,this.width,this.height);var r=function(r){var o=t.nodeDataCache[r],i=e.graphToDisplay(o.x,o.y),s=i.x,u=i.y,l=o.size/a;(0,D.default)(n,{label:o.label,color:o.color,size:l,x:s,y:u})};this.hoveredNode&&r(this.hoveredNode),this.highlightedNodes.forEach(r)}},{key:"scheduleRender",value:function(){var t=this;if(this.renderFrame)return this;this.renderFrame=requestAnimationFrame(function(){(t.needToProcess||t.needToSoftProcess)&&t.process(t.needToSoftProcess),t.renderFrame=null,t.needToProcess=!1,t.needToSoftProcess=!1,t.render()})}},{key:"scheduleHighlightedNodesRender",value:function(){var t=this;if(this.renderHighlightedNodesFrame)return this;this.renderHighlightedNodesFrame=requestAnimationFrame(function(){t.renderHighlightedNodesFrame=null,t.renderHighlightedNodes()})}},{key:"highlightNode",value:function(t){return this.highlightedNodes.add(t),this.scheduleHighlightedNodesRender(),this}},{key:"unhighlightNode",value:function(t){return this.highlightedNodes.delete(t),this.scheduleHighlightedNodesRender(),this}}]),e}(c.default);e.default=P},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=a(31),s=n(i),u=a(1),l=n(u),c=function(){function t(e,a){if(r(this,t),!(0,s.default)(e))throw new Error("Sigma.constructor: given graph is not an instance of a graphology implementation.");if(!(a instanceof l.default))throw new Error("Sigma.constructor: given renderer is not an instance of a sigma Renderer.");this.graph=e,this.renderer=a,this.renderer.bind(this),this.state={},this.nodeStates=null,this.edgeStates=null,this.renderer.render()}return o(t,[{key:"getGraph",value:function(){return this.graph}},{key:"getNodeData",value:function(t){return this.graph.getNodeAttributes(t)}},{key:"getEdgeData",value:function(t){return this.graph.getEdgeAttributes(t)}},{key:"getGraphExtent",value:function(){for(var t=this.graph,e=t.nodes(),a=t.edges(),n=-1/0,r=-1/0,o=1/0,i=1/0,s=-1/0,u=-1/0,l=0,c=e.length;l<c;l++){var h=e[l],f=this.getNodeData(h);f.x>n&&(n=f.x),f.y>r&&(r=f.y),f.x<o&&(o=f.x),f.y<i&&(i=f.y);var d=f.size||1;d>s&&(s=d)}for(var M=0,m=a.length;M<m;M++){var v=a[M],x=this.getEdgeData(v),p=x.size||1;p>u&&(u=p)}return{maxX:n,maxY:r,minX:o,minY:i,maxNodeSize:s,maxEdgeSize:u}}}]),t}();e.default=c},function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(3),s=function(t){function e(t,a){n(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.container=t,o.camera=a,o}return o(e,t),e}(i.EventEmitter);e.default=s},function(t,e,a){"use strict";function n(t){if(void 0!==t.offsetX)return t.offsetX;if(void 0!==t.layerX)return t.layerX;if(void 0!==t.clientX)return t.clientX;throw new Error("sigma/captors/utils.getX: could not extract x from event.")}function r(t){if(void 0!==t.offsetY)return t.offsetY;if(void 0!==t.layerY)return t.layerY;if(void 0!==t.clientY)return t.clientY;throw new Error("sigma/captors/utils.getY: could not extract y from event.")}function o(t){var e=t.target.ownerSVGElement?t.target.ownerSVGElement.width:t.target.width;if("number"==typeof e)return e;if(void 0!==e&&void 0!==e.baseVal)return e.baseVal.value;throw new Error("sigma/captors/utils.getWidth: could not extract width from event.")}function i(t){var e=t.target.ownerSVGElement?t.target.ownerSVGElement.height:t.target.height;if("number"==typeof e)return e;if(void 0!==e&&void 0!==e.baseVal)return e.baseVal.value;throw new Error("sigma/captors/utils.getHeight: could not extract height from event.")}function s(t){var e=-1!==t.target.namespaceURI.indexOf("svg")?1:(0,h.getPixelRatio)();return{x:o(t)/(2*e),y:i(t)/(2*e)}}function u(t,e,a){arguments.length<2&&(e=n(t),a=r(t));var o=s(t);return{x:e-o.x,y:a-o.y,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey}}function l(t){if(void 0!==c(t.wheelDelta))return t.wheelDelta;if(void 0!==c(t.detail))return-t.detail;throw new Error("sigma/captors/utils.getDelta: could not extract delta from event.")}Object.defineProperty(e,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getX=n,e.getY=r,e.getWidth=o,e.getHeight=i,e.getCenter=s,e.getMouseCoords=u,e.getWheelDelta=l;var h=a(8)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.linear=function(t){return t},e.quadraticIn=function(t){return t*t},e.quadraticOut=function(t){return t*(2-t)},e.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},e.cubicIn=function(t){return t*t*t},e.cubicOut=function(t){return--t*t*t+1},e.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=a(16),o=n(r),i=a(1),s=n(i),u=a(4),l=n(u),c=a(6),h=n(c),f=a(5),d=n(f),M=a(15),m=n(M),v={Sigma:o.default,Renderer:s.default,Camera:l.default,QuadTree:h.default,MouseCaptor:d.default,WebGLRenderer:m.default};for(var x in v)o.default[x]=v[x];t.exports=o.default},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.font="14px arial",t.beginPath(),t.fillStyle="#fff",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor="#000";var a=t.measureText(e.label).width,n=Math.round(e.x-7-2),r=Math.round(e.y-7-2),o=Math.round(a+7+e.size+9),s=Math.round(18),l=Math.round(9);t.moveTo(n,r+l),t.moveTo(n,r+l),t.arcTo(n,r,n+l,r,l),t.lineTo(n+o,r),t.lineTo(n+o,r+s),t.lineTo(n+l,r+s),t.arcTo(n,r+s,n,r+s-l,l),t.lineTo(n,r+l),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,(0,i.default)(t,e),(0,u.default)(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=a(22),i=n(o),s=a(7),u=n(s)},function(t,e,a){"use strict";function n(t,e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,e.size,0,r,!0),t.closePath(),t.fill()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var r=2*Math.PI},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),u=a(9),l=n(u),c=a(2),h=a(33),f=n(h),d=a(32),M=n(d),m=function(t){function e(t){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f.default,M.default));return a.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.buffer),a.indicesBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.indicesBuffer),a.positionLocation=t.getAttribLocation(a.program,"a_position"),a.normalLocation=t.getAttribLocation(a.program,"a_normal"),a.thicknessLocation=t.getAttribLocation(a.program,"a_thickness"),a.colorLocation=t.getAttribLocation(a.program,"a_color"),a.resolutionLocation=t.getUniformLocation(a.program,"u_resolution"),a.ratioLocation=t.getUniformLocation(a.program,"u_ratio"),a.matrixLocation=t.getUniformLocation(a.program,"u_matrix"),t.enableVertexAttribArray(a.positionLocation),t.enableVertexAttribArray(a.normalLocation),t.enableVertexAttribArray(a.thicknessLocation),t.enableVertexAttribArray(a.colorLocation),t.vertexAttribPointer(a.positionLocation,2,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(a.normalLocation,2,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(a.thicknessLocation,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(a.colorLocation,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),a}return i(e,t),s(e,[{key:"process",value:function(t,a,n,r,o){if(a.hidden||n.hidden||r.hidden)for(var i=o+e.POINTS*e.ATTRIBUTES;o<i;o++)t[o]=0;var s=r.size||1,u=a.x,l=a.y,h=n.x,f=n.y,d=(0,c.floatColor)(r.color),M=h-u,m=f-l,v=M*M+m*m,x=0,p=0;v&&(v=1/Math.sqrt(v),x=-m*v,p=M*v),t[o++]=u,t[o++]=l,t[o++]=x,t[o++]=p,t[o++]=s,t[o++]=d,t[o++]=u,t[o++]=l,t[o++]=-x,t[o++]=-p,t[o++]=s,t[o++]=d,t[o++]=h,t[o++]=f,t[o++]=x,t[o++]=p,t[o++]=s,t[o++]=d,t[o++]=h,t[o++]=f,t[o++]=-x,t[o++]=-p,t[o++]=s,t[o++]=d}},{key:"computeIndices",value:function(t){for(var a=t.length/e.ATTRIBUTES,n=a+a/2,r=new Uint16Array(n),o=0,i=0;o<n;o+=4)r[i++]=o,r[i++]=o+1,r[i++]=o+2,r[i++]=o+2,r[i++]=o+1,r[i++]=o+3;return r}},{key:"render",value:function(t,e,a){var n=this.program;t.useProgram(n),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),t.uniform2f(this.resolutionLocation,a.width,a.height),t.uniform1f(this.ratioLocation,a.ratio/Math.pow(a.ratio,a.edgesPowRatio)),t.uniformMatrix3fv(this.matrixLocation,!1,a.matrix),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a.indices,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,a.indices.length,t.UNSIGNED_SHORT,0)}}]),e}(l.default);e.default=m,m.POINTS=4,m.ATTRIBUTES=6},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),u=a(9),l=n(u),c=a(2),h=a(35),f=n(h),d=a(34),M=n(d),m=2*Math.PI/3,v=4*Math.PI/3,x=function(t){function e(t){r(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,f.default,M.default));return a.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a.buffer),a.positionLocation=t.getAttribLocation(a.program,"a_position"),a.sizeLocation=t.getAttribLocation(a.program,"a_size"),a.colorLocation=t.getAttribLocation(a.program,"a_color"),a.angleLocation=t.getAttribLocation(a.program,"a_angle"),a.resolutionLocation=t.getUniformLocation(a.program,"u_resolution"),a.matrixLocation=t.getUniformLocation(a.program,"u_matrix"),a.ratioLocation=t.getUniformLocation(a.program,"u_ratio"),a.scaleLocation=t.getUniformLocation(a.program,"u_scale"),t.enableVertexAttribArray(a.positionLocation),t.enableVertexAttribArray(a.sizeLocation),t.enableVertexAttribArray(a.colorLocation),t.enableVertexAttribArray(a.angleLocation),t.vertexAttribPointer(a.positionLocation,2,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(a.sizeLocation,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(a.colorLocation,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),t.vertexAttribPointer(a.angleLocation,1,t.FLOAT,!1,e.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),a}return i(e,t),s(e,[{key:"process",value:function(t,e,a){var n=(0,c.floatColor)(e.color);t[a++]=e.x,t[a++]=e.y,t[a++]=e.size,t[a++]=n,t[a++]=0,t[a++]=e.x,t[a++]=e.y,t[a++]=e.size,t[a++]=n,t[a++]=m,t[a++]=e.x,t[a++]=e.y,t[a++]=e.size,t[a++]=n,t[a++]=v}},{key:"render",value:function(t,a,n){var r=this.program;t.useProgram(r),t.bufferData(t.ARRAY_BUFFER,a,t.DYNAMIC_DRAW),t.uniform2f(this.resolutionLocation,n.width,n.height),t.uniform1f(this.ratioLocation,1/Math.pow(n.ratio,n.nodesPowRatio)),t.uniform1f(this.scaleLocation,n.scalingRatio),t.uniformMatrix3fv(this.matrixLocation,!1,n.matrix),t.drawArrays(t.TRIANGLES,0,a.length/e.ATTRIBUTES)}}]),e}(l.default);e.default=x,x.POINTS=3,x.ATTRIBUTES=5},function(t,e,a){"use strict";function n(t,e,a){var n="VERTEX"===t?e.VERTEX_SHADER:e.FRAGMENT_SHADER,r=e.createShader(n);if(e.shaderSource(r,a),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error("sigma/renderers/weblg/shaders/utils.loadShader: error while compiling the shader:\n"+o+"\n"+a)}return r}function r(t,e){var a=t.createProgram(),n=void 0,r=void 0;for(n=0,r=e.length;n<r;n++)t.attachShader(a,e[n]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw t.deleteProgram(a),new Error("sigma/renderers/weblg/shaders/utils.loadProgram: error while linking the program.");return a}Object.defineProperty(e,"__esModule",{value:!0}),e.loadProgram=r;var o=n.bind(null,"VERTEX"),i=n.bind(null,"FRAGMENT");e.loadVertexShader=o,e.loadFragmentShader=i},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,e,a,r){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=a,o[3]=r,o},r.set=function(t,e,a,n,r){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t},r.transpose=function(t,e){if(t===e){var a=e[1];t[1]=e[2],t[2]=a}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},r.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a*o-r*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-r*i,t[3]=a*i,t):null},r.adjoint=function(t,e){var a=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=a,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=a[0],u=a[1],l=a[2],c=a[3];return t[0]=n*s+o*u,t[1]=r*s+i*u,t[2]=n*l+o*c,t[3]=r*l+i*c,t},r.mul=r.multiply,r.rotate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=n*u+o*s,t[1]=r*u+i*s,t[2]=n*-s+o*u,t[3]=r*-s+i*u,t},r.scale=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=a[0],u=a[1];return t[0]=n*s,t[1]=r*s,t[2]=o*u,t[3]=i*u,t},r.fromRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,e,a,n){return t[2]=n[2]/n[0],a[0]=n[0],a[1]=n[1],a[3]=n[3]-t[2]*a[1],[t,e,a]},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t},r.sub=r.subtract,r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-l)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t},t.exports=r},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,e,a,r,o,i){var s=new n.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=a,s[3]=r,s[4]=o,s[5]=i,s},r.set=function(t,e,a,n,r,o,i){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=o,t[5]=i,t},r.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],u=a*o-n*r;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-r*u,t[3]=a*u,t[4]=(r*s-o*i)*u,t[5]=(n*i-a*s)*u,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=a[0],c=a[1],h=a[2],f=a[3],d=a[4],M=a[5];return t[0]=n*l+o*c,t[1]=r*l+i*c,t[2]=n*h+o*f,t[3]=r*h+i*f,t[4]=n*d+o*M+s,t[5]=r*d+i*M+u,t},r.mul=r.multiply,r.rotate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=Math.sin(a),c=Math.cos(a);return t[0]=n*c+o*l,t[1]=r*c+i*l,t[2]=n*-l+o*c,t[3]=r*-l+i*c,t[4]=s,t[5]=u,t},r.scale=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=a[0],c=a[1];return t[0]=n*l,t[1]=r*l,t[2]=o*c,t[3]=i*c,t[4]=s,t[5]=u,t},r.translate=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=a[0],c=a[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=i,t[4]=n*l+o*c+s,t[5]=r*l+i*c+u,t},r.fromRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t[4]=0,t[5]=0,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=e[0],c=e[1],h=e[2],f=e[3],d=e[4],M=e[5];return Math.abs(a-l)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-h)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-f)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-d)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-M)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))},t.exports=r},function(t,e,a){var n=a(0),r={scalar:{},SIMD:{}};r.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.fromValues=function(t,e,a,r,o,i,s,u,l,c,h,f,d,M,m,v){var x=new n.ARRAY_TYPE(16);return x[0]=t,x[1]=e,x[2]=a,x[3]=r,x[4]=o,x[5]=i,x[6]=s,x[7]=u,x[8]=l,x[9]=c,x[10]=h,x[11]=f,x[12]=d,x[13]=M,x[14]=m,x[15]=v,x},r.set=function(t,e,a,n,r,o,i,s,u,l,c,h,f,d,M,m,v){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=o,t[5]=i,t[6]=s,t[7]=u,t[8]=l,t[9]=c,t[10]=h,t[11]=f,t[12]=d,t[13]=M,t[14]=m,t[15]=v,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.scalar.transpose=function(t,e){if(t===e){var a=e[1],n=e[2],r=e[3],o=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=a,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=r,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},r.SIMD.transpose=function(t,e){var a,n,r,o,i,s,u,l,c,h;return a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(a,n,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),u=SIMD.Float32x4.shuffle(i,s,0,2,4,6),l=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(a,n,2,3,6,7),s=SIMD.Float32x4.shuffle(r,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,s,0,2,4,6),h=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,h),t},r.transpose=n.USE_SIMD?r.SIMD.transpose:r.scalar.transpose,r.scalar.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],M=e[12],m=e[13],v=e[14],x=e[15],p=a*s-n*i,S=a*u-r*i,g=a*l-o*i,b=n*u-r*s,I=n*l-o*s,y=r*l-o*u,D=c*m-h*M,F=c*v-f*M,w=c*x-d*M,_=h*v-f*m,E=h*x-d*m,A=f*x-d*v,P=p*A-S*E+g*_+b*w-I*F+y*D;return P?(P=1/P,t[0]=(s*A-u*E+l*_)*P,t[1]=(r*E-n*A-o*_)*P,t[2]=(m*y-v*I+x*b)*P,t[3]=(f*I-h*y-d*b)*P,t[4]=(u*w-i*A-l*F)*P,t[5]=(a*A-r*w+o*F)*P,t[6]=(v*g-M*y-x*S)*P,t[7]=(c*y-f*g+d*S)*P,t[8]=(i*E-s*w+l*D)*P,t[9]=(n*w-a*E-o*D)*P,t[10]=(M*I-m*g+x*p)*P,t[11]=(h*g-c*I-d*p)*P,t[12]=(s*F-i*_-u*D)*P,t[13]=(a*_-n*F+r*D)*P,t[14]=(m*S-M*b-v*p)*P,t[15]=(c*b-h*S+f*p)*P,t):null},r.SIMD.invert=function(t,e){var a,n,r,o,i,s,u,l,c,h,f=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),M=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(f,d,0,1,4,5),n=SIMD.Float32x4.shuffle(M,m,0,1,4,5),a=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,d,2,3,6,7),o=SIMD.Float32x4.shuffle(M,m,2,3,6,7),r=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.mul(n,i),u=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),s),l=SIMD.Float32x4.mul(a,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(r,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(a,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(a,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),c),h=SIMD.Float32x4.mul(a,s),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),i=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(i,i))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,c)),t):null},r.invert=n.USE_SIMD?r.SIMD.invert:r.scalar.invert,r.scalar.adjoint=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],M=e[12],m=e[13],v=e[14],x=e[15];return t[0]=s*(f*x-d*v)-h*(u*x-l*v)+m*(u*d-l*f),t[1]=-(n*(f*x-d*v)-h*(r*x-o*v)+m*(r*d-o*f)),t[2]=n*(u*x-l*v)-s*(r*x-o*v)+m*(r*l-o*u),t[3]=-(n*(u*d-l*f)-s*(r*d-o*f)+h*(r*l-o*u)),t[4]=-(i*(f*x-d*v)-c*(u*x-l*v)+M*(u*d-l*f)),t[5]=a*(f*x-d*v)-c*(r*x-o*v)+M*(r*d-o*f),t[6]=-(a*(u*x-l*v)-i*(r*x-o*v)+M*(r*l-o*u)),t[7]=a*(u*d-l*f)-i*(r*d-o*f)+c*(r*l-o*u),t[8]=i*(h*x-d*m)-c*(s*x-l*m)+M*(s*d-l*h),t[9]=-(a*(h*x-d*m)-c*(n*x-o*m)+M*(n*d-o*h)),t[10]=a*(s*x-l*m)-i*(n*x-o*m)+M*(n*l-o*s),t[11]=-(a*(s*d-l*h)-i*(n*d-o*h)+c*(n*l-o*s)),t[12]=-(i*(h*v-f*m)-c*(s*v-u*m)+M*(s*f-u*h)),t[13]=a*(h*v-f*m)-c*(n*v-r*m)+M*(n*f-r*h),t[14]=-(a*(s*v-u*m)-i*(n*v-r*m)+M*(n*u-r*s)),t[15]=a*(s*f-u*h)-i*(n*f-r*h)+c*(n*u-r*s),t},r.SIMD.adjoint=function(t,e){var a,n,r,o,i,s,u,l,c,h,f,d,M,a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(a,n,0,1,4,5),s=SIMD.Float32x4.shuffle(r,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.shuffle(a,n,2,3,6,7),l=SIMD.Float32x4.shuffle(r,o,2,3,6,7),u=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.mul(s,c),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),h),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(s,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),h),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,M),t},r.adjoint=n.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint,r.determinant=function(t){var e=t[0],a=t[1],n=t[2],r=t[3],o=t[4],i=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],f=t[11],d=t[12],M=t[13],m=t[14],v=t[15];return(e*i-a*o)*(h*v-f*m)-(e*s-n*o)*(c*v-f*M)+(e*u-r*o)*(c*m-h*M)+(a*s-n*i)*(l*v-f*d)-(a*u-r*i)*(l*m-h*d)+(n*u-r*s)*(l*M-c*d)},r.SIMD.multiply=function(t,e,a){var n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(a,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,0,u);var l=SIMD.Float32x4.load(a,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var h=SIMD.Float32x4.load(a,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var d=SIMD.Float32x4.load(a,12),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,M),t},r.scalar.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],M=e[11],m=e[12],v=e[13],x=e[14],p=e[15],S=a[0],g=a[1],b=a[2],I=a[3];return t[0]=S*n+g*s+b*h+I*m,t[1]=S*r+g*u+b*f+I*v,t[2]=S*o+g*l+b*d+I*x,t[3]=S*i+g*c+b*M+I*p,S=a[4],g=a[5],b=a[6],I=a[7],t[4]=S*n+g*s+b*h+I*m,t[5]=S*r+g*u+b*f+I*v,t[6]=S*o+g*l+b*d+I*x,t[7]=S*i+g*c+b*M+I*p,S=a[8],g=a[9],b=a[10],I=a[11],t[8]=S*n+g*s+b*h+I*m,t[9]=S*r+g*u+b*f+I*v,t[10]=S*o+g*l+b*d+I*x,t[11]=S*i+g*c+b*M+I*p,S=a[12],g=a[13],b=a[14],I=a[15],t[12]=S*n+g*s+b*h+I*m,t[13]=S*r+g*u+b*f+I*v,t[14]=S*o+g*l+b*d+I*x,t[15]=S*i+g*c+b*M+I*p,t},r.multiply=n.USE_SIMD?r.SIMD.multiply:r.scalar.multiply,r.mul=r.multiply,r.scalar.translate=function(t,e,a){var n,r,o,i,s,u,l,c,h,f,d,M,m=a[0],v=a[1],x=a[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*x+e[12],t[13]=e[1]*m+e[5]*v+e[9]*x+e[13],t[14]=e[2]*m+e[6]*v+e[10]*x+e[14],t[15]=e[3]*m+e[7]*v+e[11]*x+e[15]):(n=e[0],r=e[1],o=e[2],i=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=e[9],d=e[10],M=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=i,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=M,t[12]=n*m+s*v+h*x+e[12],t[13]=r*m+u*v+f*x+e[13],t[14]=o*m+l*v+d*x+e[14],t[15]=i*m+c*v+M*x+e[15]),t},r.SIMD.translate=function(t,e,a){var n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(a[0],a[1],a[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var u=SIMD.Float32x4.add(n,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,u),t},r.translate=n.USE_SIMD?r.SIMD.translate:r.scalar.translate,r.scalar.scale=function(t,e,a){var n=a[0],r=a[1],o=a[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.SIMD.scale=function(t,e,a){var n,r,o,i=SIMD.Float32x4(a[0],a[1],a[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),r=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},r.scale=n.USE_SIMD?r.SIMD.scale:r.scalar.scale,r.rotate=function(t,e,a,r){var o,i,s,u,l,c,h,f,d,M,m,v,x,p,S,g,b,I,y,D,F,w,_,E,A=r[0],P=r[1],T=r[2],O=Math.sqrt(A*A+P*P+T*T);return Math.abs(O)<n.EPSILON?null:(O=1/O,A*=O,P*=O,T*=O,o=Math.sin(a),i=Math.cos(a),s=1-i,u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],d=e[5],M=e[6],m=e[7],v=e[8],x=e[9],p=e[10],S=e[11],g=A*A*s+i,b=P*A*s+T*o,I=T*A*s-P*o,y=A*P*s-T*o,D=P*P*s+i,F=T*P*s+A*o,w=A*T*s+P*o,_=P*T*s-A*o,E=T*T*s+i,t[0]=u*g+f*b+v*I,t[1]=l*g+d*b+x*I,t[2]=c*g+M*b+p*I,t[3]=h*g+m*b+S*I,t[4]=u*y+f*D+v*F,t[5]=l*y+d*D+x*F,t[6]=c*y+M*D+p*F,t[7]=h*y+m*D+S*F,t[8]=u*w+f*_+v*E,t[9]=l*w+d*_+x*E,t[10]=c*w+M*_+p*E,t[11]=h*w+m*_+S*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},r.scalar.rotateX=function(t,e,a){var n=Math.sin(a),r=Math.cos(a),o=e[4],i=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+l*n,t[5]=i*r+c*n,t[6]=s*r+h*n,t[7]=u*r+f*n,t[8]=l*r-o*n,t[9]=c*r-i*n,t[10]=h*r-s*n,t[11]=f*r-u*n,t},r.SIMD.rotateX=function(t,e,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(o,n))),t},r.rotateX=n.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX,r.scalar.rotateY=function(t,e,a){var n=Math.sin(a),r=Math.cos(a),o=e[0],i=e[1],s=e[2],u=e[3],l=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-l*n,t[1]=i*r-c*n,t[2]=s*r-h*n,t[3]=u*r-f*n,t[8]=o*n+l*r,t[9]=i*n+c*r,t[10]=s*n+h*r,t[11]=u*n+f*r,t},r.SIMD.rotateY=function(t,e,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,r))),t},r.rotateY=n.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY,r.scalar.rotateZ=function(t,e,a){var n=Math.sin(a),r=Math.cos(a),o=e[0],i=e[1],s=e[2],u=e[3],l=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+l*n,t[1]=i*r+c*n,t[2]=s*r+h*n,t[3]=u*r+f*n,t[4]=l*r-o*n,t[5]=c*r-i*n,t[6]=h*r-s*n,t[7]=f*r-u*n,t},r.SIMD.rotateZ=function(t,e,a){var n=SIMD.Float32x4.splat(Math.sin(a)),r=SIMD.Float32x4.splat(Math.cos(a));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(o,n))),t},r.rotateZ=n.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ,r.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,e,a){var r,o,i,s=a[0],u=a[1],l=a[2],c=Math.sqrt(s*s+u*u+l*l);return Math.abs(c)<n.EPSILON?null:(c=1/c,s*=c,u*=c,l*=c,r=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=s*s*i+o,t[1]=u*s*i+l*r,t[2]=l*s*i-u*r,t[3]=0,t[4]=s*u*i-l*r,t[5]=u*u*i+o,t[6]=l*u*i+s*r,t[7]=0,t[8]=s*l*i+u*r,t[9]=u*l*i-s*r,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=n+n,u=r+r,l=o+o,c=n*s,h=n*u,f=n*l,d=r*u,M=r*l,m=o*l,v=i*s,x=i*u,p=i*l;return t[0]=1-(d+m),t[1]=h+p,t[2]=f-x,t[3]=0,t[4]=h-p,t[5]=1-(c+m),t[6]=M+v,t[7]=0,t[8]=f+x,t[9]=M-v,t[10]=1-(c+d),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},r.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},r.getRotation=function(t,e){var a=e[0]+e[5]+e[10],n=0;return a>0?(n=2*Math.sqrt(a+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},r.fromRotationTranslationScale=function(t,e,a,n){var r=e[0],o=e[1],i=e[2],s=e[3],u=r+r,l=o+o,c=i+i,h=r*u,f=r*l,d=r*c,M=o*l,m=o*c,v=i*c,x=s*u,p=s*l,S=s*c,g=n[0],b=n[1],I=n[2];return t[0]=(1-(M+v))*g,t[1]=(f+S)*g,t[2]=(d-p)*g,t[3]=0,t[4]=(f-S)*b,t[5]=(1-(h+v))*b,t[6]=(m+x)*b,t[7]=0,t[8]=(d+p)*I,t[9]=(m-x)*I,t[10]=(1-(h+M))*I,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,e,a,n,r){var o=e[0],i=e[1],s=e[2],u=e[3],l=o+o,c=i+i,h=s+s,f=o*l,d=o*c,M=o*h,m=i*c,v=i*h,x=s*h,p=u*l,S=u*c,g=u*h,b=n[0],I=n[1],y=n[2],D=r[0],F=r[1],w=r[2];return t[0]=(1-(m+x))*b,t[1]=(d+g)*b,t[2]=(M-S)*b,t[3]=0,t[4]=(d-g)*I,t[5]=(1-(f+x))*I,t[6]=(v+p)*I,t[7]=0,t[8]=(M+S)*y,t[9]=(v-p)*y,t[10]=(1-(f+m))*y,t[11]=0,t[12]=a[0]+D-(t[0]*D+t[4]*F+t[8]*w),t[13]=a[1]+F-(t[1]*D+t[5]*F+t[9]*w),t[14]=a[2]+w-(t[2]*D+t[6]*F+t[10]*w),t[15]=1,t},r.fromQuat=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a+a,s=n+n,u=r+r,l=a*i,c=n*i,h=n*s,f=r*i,d=r*s,M=r*u,m=o*i,v=o*s,x=o*u;return t[0]=1-h-M,t[1]=c+x,t[2]=f-v,t[3]=0,t[4]=c-x,t[5]=1-l-M,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,e,a,n,r,o,i){var s=1/(a-e),u=1/(r-n),l=1/(o-i);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(a+e)*s,t[9]=(r+n)*u,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},r.perspective=function(t,e,a,n,r){var o=1/Math.tan(e/2),i=1/(n-r);return t[0]=o/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*i,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,e,a,n){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),l=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(r-o)*l*.5,t[10]=n/(a-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*a/(a-n),t[15]=0,t},r.ortho=function(t,e,a,n,r,o,i){var s=1/(e-a),u=1/(n-r),l=1/(o-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+a)*s,t[13]=(r+n)*u,t[14]=(i+o)*l,t[15]=1,t},r.lookAt=function(t,e,a,o){var i,s,u,l,c,h,f,d,M,m,v=e[0],x=e[1],p=e[2],S=o[0],g=o[1],b=o[2],I=a[0],y=a[1],D=a[2];return Math.abs(v-I)<n.EPSILON&&Math.abs(x-y)<n.EPSILON&&Math.abs(p-D)<n.EPSILON?r.identity(t):(f=v-I,d=x-y,M=p-D,m=1/Math.sqrt(f*f+d*d+M*M),f*=m,d*=m,M*=m,i=g*M-b*d,s=b*f-S*M,u=S*d-g*f,m=Math.sqrt(i*i+s*s+u*u),m?(m=1/m,i*=m,s*=m,u*=m):(i=0,s=0,u=0),l=d*u-M*s,c=M*i-f*u,h=f*s-d*i,m=Math.sqrt(l*l+c*c+h*h),m?(m=1/m,l*=m,c*=m,h*=m):(l=0,c=0,h=0),t[0]=i,t[1]=l,t[2]=f,t[3]=0,t[4]=s,t[5]=c,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=M,t[11]=0,t[12]=-(i*v+s*x+u*p),t[13]=-(l*v+c*x+h*p),t[14]=-(f*v+d*x+M*p),t[15]=1,t)},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t[9]=e[9]+a[9],t[10]=e[10]+a[10],t[11]=e[11]+a[11],t[12]=e[12]+a[12],t[13]=e[13]+a[13],t[14]=e[14]+a[14],t[15]=e[15]+a[15],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t[9]=e[9]-a[9],t[10]=e[10]-a[10],t[11]=e[11]-a[11],t[12]=e[12]-a[12],t[13]=e[13]-a[13],t[14]=e[14]-a[14],t[15]=e[15]-a[15],t},r.sub=r.subtract,r.multiplyScalar=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12]*a,t[13]=e[13]*a,t[14]=e[14]*a,t[15]=e[15]*a,t},r.multiplyScalarAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t[9]=e[9]+a[9]*n,t[10]=e[10]+a[10]*n,t[11]=e[11]+a[11]*n,t[12]=e[12]+a[12]*n,t[13]=e[13]+a[13]*n,t[14]=e[14]+a[14]*n,t[15]=e[15]+a[15]*n,t},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},r.equals=function(t,e){var a=t[0],r=t[1],o=t[2],i=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=t[9],d=t[10],M=t[11],m=t[12],v=t[13],x=t[14],p=t[15],S=e[0],g=e[1],b=e[2],I=e[3],y=e[4],D=e[5],F=e[6],w=e[7],_=e[8],E=e[9],A=e[10],P=e[11],T=e[12],O=e[13],L=e[14],R=e[15];return Math.abs(a-S)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(r-g)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(o-b)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-I)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(s-y)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-D)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(l-F)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(c-w)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-_)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(f-E)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-A)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(M-P)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(m-T)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(v-O)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(x-L)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(L))&&Math.abs(p-R)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))},t.exports=r},function(t,e,a){var n=a(0),r=a(12),o=a(13),i=a(14),s={};s.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),a=o.fromValues(0,1,0);return function(n,r,i){var u=o.dot(r,i);return u<-.999999?(o.cross(t,e,r),o.length(t)<1e-6&&o.cross(t,a,r),o.normalize(t,t),s.setAxisAngle(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,r,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,s.normalize(n,n))}}(),s.setAxes=function(){var t=r.create();return function(e,a,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-a[0],t[5]=-a[1],t[8]=-a[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=i.clone,s.fromValues=i.fromValues,s.copy=i.copy,s.set=i.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,a){a*=.5;var n=Math.sin(a);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(a),t},s.getAxisAngle=function(t,e){var a=2*Math.acos(e[3]),n=Math.sin(a/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),a},s.add=i.add,s.multiply=function(t,e,a){var n=e[0],r=e[1],o=e[2],i=e[3],s=a[0],u=a[1],l=a[2],c=a[3];return t[0]=n*c+i*s+r*l-o*u,t[1]=r*c+i*u+o*s-n*l,t[2]=o*c+i*l+n*u-r*s,t[3]=i*c-n*s-r*u-o*l,t},s.mul=s.multiply,s.scale=i.scale,s.rotateX=function(t,e,a){a*=.5;var n=e[0],r=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=n*u+i*s,t[1]=r*u+o*s,t[2]=o*u-r*s,t[3]=i*u-n*s,t},s.rotateY=function(t,e,a){a*=.5;var n=e[0],r=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=n*u-o*s,t[1]=r*u+i*s,t[2]=o*u+n*s,t[3]=i*u-r*s,t},s.rotateZ=function(t,e,a){a*=.5;var n=e[0],r=e[1],o=e[2],i=e[3],s=Math.sin(a),u=Math.cos(a);return t[0]=n*u+r*s,t[1]=r*u-n*s,t[2]=o*u+i*s,t[3]=i*u-o*s,t},s.calculateW=function(t,e){var a=e[0],n=e[1],r=e[2];return t[0]=a,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-a*a-n*n-r*r)),t},s.dot=i.dot,s.lerp=i.lerp,s.slerp=function(t,e,a,n){var r,o,i,s,u,l=e[0],c=e[1],h=e[2],f=e[3],d=a[0],M=a[1],m=a[2],v=a[3];return o=l*d+c*M+h*m+f*v,o<0&&(o=-o,d=-d,M=-M,m=-m,v=-v),1-o>1e-6?(r=Math.acos(o),i=Math.sin(r),s=Math.sin((1-n)*r)/i,u=Math.sin(n*r)/i):(s=1-n,u=n),t[0]=s*l+u*d,t[1]=s*c+u*M,t[2]=s*h+u*m,t[3]=s*f+u*v,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(a,n,r,o,i,u){return s.slerp(t,n,i,u),s.slerp(e,r,o,u),s.slerp(a,t,e,2*u*(1-u)),a}}(),s.invert=function(t,e){var a=e[0],n=e[1],r=e[2],o=e[3],i=a*a+n*n+r*r+o*o,s=i?1/i:0;return t[0]=-a*s,t[1]=-n*s,t[2]=-r*s,t[3]=o*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=i.length,s.len=s.length,s.squaredLength=i.squaredLength,s.sqrLen=s.squaredLength,s.normalize=i.normalize,s.fromMat3=function(t,e){var a,n=e[0]+e[4]+e[8];if(n>0)a=Math.sqrt(n+1),t[3]=.5*a,a=.5/a,t[0]=(e[5]-e[7])*a,t[1]=(e[6]-e[2])*a,t[2]=(e[1]-e[3])*a;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,i=(r+2)%3;a=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*i+i]+1),t[r]=.5*a,a=.5/a,t[3]=(e[3*o+i]-e[3*i+o])*a,t[o]=(e[3*o+r]+e[3*r+o])*a,t[i]=(e[3*i+r]+e[3*r+i])*a}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=i.exactEquals,s.equals=i.equals,t.exports=s},function(t,e,a){var n=a(0),r={};r.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},r.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},r.fromValues=function(t,e){var a=new n.ARRAY_TYPE(2);return a[0]=t,a[1]=e,a},r.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},r.set=function(t,e,a){return t[0]=e,t[1]=a,t},r.add=function(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t},r.subtract=function(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t},r.sub=r.subtract,r.multiply=function(t,e,a){return t[0]=e[0]*a[0],t[1]=e[1]*a[1],t},r.mul=r.multiply,r.divide=function(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t},r.div=r.divide,r.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},r.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},r.min=function(t,e,a){return t[0]=Math.min(e[0],a[0]),t[1]=Math.min(e[1],a[1]),t},r.max=function(t,e,a){return t[0]=Math.max(e[0],a[0]),t[1]=Math.max(e[1],a[1]),t},r.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},r.scale=function(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t},r.scaleAndAdd=function(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t},r.distance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(a*a+n*n)},r.dist=r.distance,r.squaredDistance=function(t,e){var a=e[0]-t[0],n=e[1]-t[1];return a*a+n*n},r.sqrDist=r.squaredDistance,r.length=function(t){var e=t[0],a=t[1];return Math.sqrt(e*e+a*a)},r.len=r.length,r.squaredLength=function(t){var e=t[0],a=t[1];return e*e+a*a},r.sqrLen=r.squaredLength,r.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},r.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},r.normalize=function(t,e){var a=e[0],n=e[1],r=a*a+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},r.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},r.cross=function(t,e,a){var n=e[0]*a[1]-e[1]*a[0];return t[0]=t[1]=0,t[2]=n,t},r.lerp=function(t,e,a,n){var r=e[0],o=e[1];return t[0]=r+n*(a[0]-r),t[1]=o+n*(a[1]-o),t},r.random=function(t,e){e=e||1;var a=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(a)*e,t[1]=Math.sin(a)*e,t},r.transformMat2=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[2]*r,t[1]=a[1]*n+a[3]*r,t},r.transformMat2d=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[2]*r+a[4],t[1]=a[1]*n+a[3]*r+a[5],t},r.transformMat3=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[3]*r+a[6],t[1]=a[1]*n+a[4]*r+a[7],t},r.transformMat4=function(t,e,a){var n=e[0],r=e[1];return t[0]=a[0]*n+a[4]*r+a[12],t[1]=a[1]*n+a[5]*r+a[13],t},r.forEach=function(){var t=r.create();return function(e,a,n,r,o,i){var s,u;for(a||(a=2),n||(n=0),u=r?Math.min(r*a+n,e.length):e.length,s=n;s<u;s+=a)t[0]=e[s],t[1]=e[s+1],o(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}(),r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},r.equals=function(t,e){var a=t[0],r=t[1],o=e[0],i=e[1];return Math.abs(a-o)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))},t.exports=r},function(t,e){t.exports=function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.addUndirectedEdgeWithKey&&"function"==typeof t.dropNodes&&"boolean"==typeof t.multi}},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nvoid main(void) {\n  float feather = 0.5;\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\n  float radius = v_thickness;\n\n  float dist = length(v_normal) * (radius + feather);\n\n  float t = smoothstep(\n    radius + feather,\n    radius - feather,\n    dist\n  );\n\n  gl_FragColor = mix(color0, v_color, t);\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_thickness;\nattribute float a_color;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nvoid main() {\n\n  float feather = 0.5 * 2.0;\n\n  // Scale from [[-1 1] [-1 1]] to the container:\n  vec2 delta = vec2(a_normal * (a_thickness + feather) / 2.0);\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n  position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n  // Applying\n  gl_Position = vec4(position, 0, 1);\n\n  v_normal = a_normal;\n  v_thickness = (a_thickness / 2.0) * (1.0 / u_ratio);\n\n  // Extract the color:\n  float c = a_color;\n  v_color.b = mod(c, 256.0); c = floor(c / 256.0);\n  v_color.g = mod(c, 256.0); c = floor(c / 256.0);\n  v_color.r = mod(c, 256.0); c = floor(c / 256.0); v_color /= 255.0;\n  v_color.a = 1.0;\n}\n"},function(t,e){t.exports="precision mediump float;\n\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\n\nvoid main(void) {\n  float border_size = 0.8;\n  vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\n  vec2 m = gl_FragCoord.xy - center;\n  float dist = sqrt(m.x * m.x + m.y * m.y);\n  float t = smoothstep(\n    radius + border_size,\n    radius - border_size,\n    dist\n  );\n\n  // Here is how we draw a disc instead of a square:\n  gl_FragColor = mix(color0, color, t);\n}\n"},function(t,e){t.exports="attribute vec2 a_position;\nattribute float a_size;\nattribute float a_color;\nattribute float a_angle;\n\nuniform vec2 u_resolution;\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 color;\nvarying vec2 center;\nvarying float radius;\n\nvoid main() {\n  // Multiply the point size twice:\n  radius = a_size * u_ratio;\n\n  // Scale from [[-1 1] [-1 1]] to the container:\n  vec2 position = (u_matrix * vec3(a_position, 1)).xy;\n  // center = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n  center = position * u_scale;\n  center = vec2(center.x, u_scale * u_resolution.y - center.y);\n\n  position = position +\n    2.0 * radius * vec2(cos(a_angle), sin(a_angle));\n  position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n  radius = radius * u_scale;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  float c = a_color;\n  color.b = mod(c, 256.0); c = floor(c / 256.0);\n  color.g = mod(c, 256.0); c = floor(c / 256.0);\n  color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;\n  color.a = 1.0;\n}\n"}])});