{"version":3,"sources":["client.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","root","factory","exports","module","define","amd","nes","window","global","ignore","parse","message","next","error","JSON","err","NesError","stringify","string","nextTick","callback","setTimeout","type","Error","errorCodes","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1015","Client","url","options","this","_url","_settings","_heartbeatTimeout","_ws","_reconnection","_reconnectionTimer","_ids","_requests","_subscriptions","_heartbeat","_packets","_disconnectListeners","_disconnectRequested","onError","console","onConnect","onDisconnect","onUpdate","id","WebSocket","connect","arguments","reconnect","wait","delay","maxDelay","retries","Infinity","settings","auth","timeout","_connect","initial","_this","ws","clearTimeout","finalize","cb","_cleanup","_reconnect","onopen","_hello","path","_disconnect","onerror","event","onclose","wasRequested","log","code","explanation","reason","wasClean","willReconnect","onmessage","_onMessage","overrideReconnectionAuth","disconnect","isInternal","requested","push","readyState","OPEN","CONNECTING","close","ids","Object","keys","i","length","request","listeners","forEach","listener","_this2","Math","min","method","headers","payload","_send","track","_this3","encoded","send","record","version","subs","subscriptions","subscribe","handler","_this4","indexOf","unsubscribe","sync","pos","splice","errIgnore","_this5","_beat","data","prefix","slice","join","update","statusCode","socket","heartbeat","interval","handlers","undefined","flags","revoked","_this6"],"mappings":"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"}