!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).parser=e()}}(function(){return function e(t,r,n){function i(a,f){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!f&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return i(r||e)},d,d.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){function n(e){for(var t=f(e,s),r="",n=0;n<t.length;n++)r+=t[n][1];return r}function i(e,t){if(t){var r=e.split(":"),n="/"===e.charAt(0)?"/":"";2===r.length&&(e=n+r[1])}return e}function o(e,t){return e=e?!t||isNaN(e)?""+e:-1!==e.indexOf(".")?Number.parseFloat(e):Number.parseInt(e,10):""}function a(e,t,r,n){if(e=e||e.trim(),!t&&e.length>3){for(var o=f(e,h),a={},l=0;l<o.length;l++)a[r+i(o[l][1],n)]=o[l][3];return a}}var f=e("./util").getAllMatches,l=function(e,t,r){this.tagname=e,this.parent=t,this.child=[],this.val=r,this.addChild=function(e){this.child.push(e)}},u=new RegExp("<(\\/?[\\w:\\-._]+)([^>]*)>(<!\\[CDATA\\[([^\\]\\]]*)\\]\\]>)*([^<]+)?","g"),d={attrPrefix:"@_",textNodeName:"#text",ignoreNonTextNodeAttr:!0,ignoreTextNodeAttr:!0,ignoreNameSpace:!1,ignoreRootElement:!1,textNodeConversion:!0},g=function(e){e||(e={});for(var t=["attrPrefix","ignoreNonTextNodeAttr","ignoreTextNodeAttr","ignoreNameSpace","ignoreRootElement","textNodeName","textNodeConversion"],r=0;r<t.length;r++)void 0===e[t[r]]&&(e[t[r]]=d[t[r]]);return e},c=function(e,t){t=g(t);for(var r=f(e,u),d=new l("!xml"),c=d,s=0;s<r.length;s++){var h,v=i(r[s][1],t.ignoreNameSpace),x=s+1<r.length?i(r[s+1][1],t.ignoreNameSpace):void 0,p=r[s][2],N=void 0===r[s][4]?r[s][5]:n(r[s][0]);if(0!==v.indexOf("/")){var m="/"===p.charAt(p.length-1),A=new l(v,c);if(m)h=a(p,t.ignoreTextNodeAttr,t.attrPrefix,t.ignoreNameSpace),A.val=h||"",c.addChild(A);else if("/"+v===x)h=a(p,t.ignoreTextNodeAttr,t.attrPrefix,t.ignoreNameSpace),N=o(N,t.textNodeConversion),h?(h[t.textNodeName]=N,A.val=h):A.val=N||"",c.addChild(A),s++;else{if(h=a(p,t.ignoreNonTextNodeAttr,t.attrPrefix,t.ignoreNameSpace))for(var w in h)h.hasOwnProperty(w)&&A.addChild(new l(w,A,h[w]));c.addChild(A),c=A}}else c=c.parent}return d},s=new RegExp("<!\\[CDATA\\[([^\\]\\]]*)\\]\\]>","g"),h=new RegExp("(\\S+)\\s*=\\s*(['\"])(.*?)\\2","g"),v=function(e){var t={};if(e.val||""===e.val)return e.val;for(var r=0;r<e.child.length;r++){var n=e.child[r].tagname,i=v(e.child[r]);if(void 0!==t[n]){if(!Array.isArray(t[n])){var o=t[n];t[n]=[],t[n].push(o)}t[n].push(i)}else t[n]=i}return t};r.parse=function(e,t){return v(c(e,t))},r.getTraversalObj=c,r.convertToJson=v,r.validate=e("./validator").validate},{"./util":2,"./validator":3}],2:[function(e,t,r){var n=function(e,t){var r=t.exec(e);return null!==r&&void 0!==r};r.doesMatch=n,r.doesNotMatch=function(e,t){return!n(e,t)},r.getAllMatches=function(e,t){for(var r=[],n=t.exec(e);n;){for(var i=[],o=0;o<n.length;o++)i.push(n[o]);r.push(i),n=t.exec(e)}return r}},{}],3:[function(e,t,r){function n(e){return!f.doesMatch(e,u)&&!f.doesNotMatch(e,d)}function o(e){var t=f.getAllMatches(e,g);for(i=0;i<t.length;i++){if(t[i][1].trim().length>0&&t[i][1].trim().length<4)return!1;if(0!==t[i][1].trim().length){var r=f.getAllMatches(t[i][1],c),n=[];for(j=0;j<r.length;j++){if(n[r[j][1]])return!1;n[r[j][1]]=1}}}return!0}function a(e,t){if(e.length===t)return!0;if(0===e[t][0].indexOf("</"))return t;if(e[t][0].indexOf("/>")===e[t][0].length-2)return!1===n(e[t][0].substring(1))?-1:a(e,t+1);if(e.length>t+1){if(0===e[t+1][0].indexOf("</"))return!1===n(e[t][1])?-1:e[t][1]===e[t+1][1]?a(e,t+2):-1;var r=a(e,t+1);if(-1!==r&&0===e[r][0].indexOf("</"))return!1===n(e[t][1])?-1:e[t][1]===e[r][1]?a(e,r+1):-1}return-1}var f=e("./util"),l=new RegExp("<\\/?([\\w:\\-_.]+)\\s*/?>","g");r.validate=function(e){if(e=e.replace(/\n/g,""),e=e.replace(/(<!\[CDATA\[.*?\]\]>)/g,""),e=e.replace(/(<!--.*?(?:-->))/g,""),!0!==o(e))return!1;if(e=e.replace(/(\s+(?:[\w:\-]+)\s*=\s*(['\"]).*?\2)/g,""),(e=e.replace(/(^\s*<\?xml\s*\?>)/g,"")).indexOf("<![CDATA[")>0||e.indexOf("\x3c!--")>0)return!1;var t=f.getAllMatches(e,l);return 0!==t.length&&!0===a(t,0)};var u=new RegExp("^[Xx][Mm][Ll]"),d=new RegExp("^([a-zA-Z]|_)[\\w.\\-_:]*"),g=new RegExp("<[\\w:\\-_.]+(.*?)/?>","g"),c=new RegExp("\\s+([\\w:-]+)\\s*=\\s*(['\"])(.*?)\\2","g")},{"./util":2}]},{},[1])(1)});